---
title: "Deisotoper: Comparation Of Test Data"
author: "Christian Panse, Lucas Schmidt"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


# Create MSM Java-Object And Make Summaries

```{r echo=TRUE, warning=TRUE}
library(deisotoper)

input <- c(load(system.file("extdata", name = 'TP_HeLa_200ng_filtered_pd21.RData', package = "deisotoper")), load(system.file("extdata", name = 'TP_HeLa_200ng_short.RData', package = "deisotoper")))

S <- lapply(input, function(u){ 
  jo <- jCreateMSM(get(u)); 
  
  S <- jSummaryMSM(jo); 
  S$file <- u;
  S$status <- 'input'
  
  Sd1 <- jSummaryMSM(jD <- deisotoper:::jDeisotopeMSM(jobj = jo))
  Sd1$file <- u;
  Sd1$status <- 'fdbm'
  
  rbind(S, Sd1) 
})


S <- do.call('rbind', S)
```

# Plot Of The Summaries

## Number Of Peaks

```{r fig.retina=3, fig.width=8, fig.height=5}
library(lattice)
filter <- (S$Attribute == "nr_of_peaks")
histogram(~Value | file * status, data=S[filter, ],
          scales = list(x=list(log=TRUE)), type='count')
```

## Minimal Peak Distance

```{r fig.retina=3, fig.width=8, fig.height=5}
filter <- (S$Attribute == "min_peak_distance")
histogram(~Value | file * status,  data=S[filter, ], 
          scales = list(x=list(log=TRUE)), type='count')
```

## Maximal Peak Distance

```{r fig.retina=3, fig.width=8, fig.height=5}
filter <- (S$Attribute == "max_peak_distance")
histogram(~Value | file * status,  data=S[filter, ],
          scales = list(x=list(log=TRUE)), type='count')
```

## Sum Of Intensities

```{r fig.retina=3, fig.width=8, fig.height=5}
filter <- (S$Attribute == "sum_intensity")
histogram(~Value | file* status,  data=S[filter, ],
          scales = list(x=list(log=TRUE)), type='count')
```

## Minimal Intensity

```{r fig.retina=3, fig.width=8, fig.height=5}
filter <- (S$Attribute == "min_intensity")
histogram(~Value | file * status ,  data=S[filter, ],
          scales = list(x=list(log=TRUE)), type='count')
```

## Maximal Intensity

```{r fig.retina=3, fig.width=8, fig.height=5}
filter <- (S$Attribute == "max_intensity")
histogram(~Value | file * status,  data=S[filter, ], scales = list(x=list(log=TRUE)), type='count')
```