---
title: "Deisotoper: Comparation Of Test Data"
author: "Christian Panse, Lucas Schmidt"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


## Create MSM Java-Object And Make Summaries

```{r echo=TRUE, warning=TRUE}
library(deisotoper)

input <- c("http://fgcz-ms.uzh.ch/~cpanse/R257544/TP_HeLa_200ng.RData",
  "http://fgcz-ms.uzh.ch/~cpanse/R257544/TP_HeLa_200ng_pd21.RData")

S <- lapply(input, function(u){ 
  objN <- load(con <- url(u)); 
  jo <- jCreateMSM(get(objN)); 
  
  S <- jSummaryMSM(jo); 
  S$file <- objN;
  S$status <- 'input'
  
  Sd1 <- jSummaryMSM(jD <- deisotoper:::jDeisotopeMSM(jobj = jo))
  Sd1$file <- objN;
  Sd1$status <- 'fdbm'
  
  rbind(S, Sd1) 
})


S <- do.call('rbind', S)
```

## Plot Of The Summaries

### Number Of Peaks

```{r fig.retina=3, fig.width=8, fig.height=5}
library(lattice)
filter <- (S$Attribute == "nr_of_peaks")
histogram(~Value | file * status, data=S[filter, ],
          scales = list(x=list(log=TRUE)), type='count')
```

### Minimal Peak Distance

```{r fig.retina=3, fig.width=8, fig.height=5}
filter <- (S$Attribute == "min_peak_distance")
histogram(~Value | file * status,  data=S[filter, ], 
          scales = list(x=list(log=TRUE)), type='count')
```

### Maximal Peak Distance

```{r fig.retina=3, fig.width=8, fig.height=5}
filter <- (S$Attribute == "max_peak_distance")
histogram(~Value | file * status,  data=S[filter, ],
          scales = list(x=list(log=TRUE)), type='count')
```

### Sum Of Intensities

```{r fig.retina=3, fig.width=8, fig.height=5}
filter <- (S$Attribute == "sum_intensity")
histogram(~Value | file* status,  data=S[filter, ],
          scales = list(x=list(log=TRUE)), type='count')
```

### Minimal Intensity

```{r fig.retina=3, fig.width=8, fig.height=5}
filter <- (S$Attribute == "min_intensity")
histogram(~Value | file * status ,  data=S[filter, ],
          scales = list(x=list(log=TRUE)), type='count')
```

### Maximal Intensity

```{r fig.retina=3, fig.width=8, fig.height=5}
filter <- (S$Attribute == "max_intensity")
histogram(~Value | file * status,  data=S[filter, ], scales = list(x=list(log=TRUE)), type='count')
```